---
title: "usa_all_periods_final"
description: "Detailed location-level broadband availability data"
icon: "table"
---

## Overview

**Fully Qualified Name**: `FIBER_MAP.DBT_GOLD.USA_ALL_PERIODS_FINAL`

**Purpose**: Detailed location-level broadband availability data with full provider, technology, and speed information.

**Grain**: One row per combination of:
- Location ID
- Provider Brand + FRN
- Technology Type
- Time Period
- Business/Residential Code
- Advertised Speeds

**Typical Row Count**: ~50 million records (Indiana 2% sample)

## When to Use This Table

<CardGroup cols={2}>
  <Card title="Speed Analysis" icon="gauge-high">
    Analyze download and upload speeds across providers and technologies
  </Card>
  
  <Card title="DOCSIS Tracking" icon="signal-stream">
    Track cable technology versions and upgrades (DOCSIS 2.0/3.0/3.1/4.0)
  </Card>
  
  <Card title="Build-Out Timeline" icon="calendar-check">
    Monitor when providers first deployed services in markets
  </Card>
  
  <Card title="Business vs Residential" icon="building">
    Analyze service availability by customer type
  </Card>
</CardGroup>

Use **usa_location_summary** instead when you only need location counts without speed details.

---

## Key Metrics

### Number of Locations

**Metric Name**: `NUMBER_OF_LOCATIONS`

**Definition**: Distinct count of broadband service locations

**Calculation**: `COUNT_DISTINCT(LOCATION_ID)`

**Business Context**

This is the fundamental metric for market sizing and coverage analysis. It answers questions like:
- How many locations does Provider X serve?
- What's the size of the addressable market in County Y?
- How many locations have fiber service available?

<Warning>
Always use `COUNT(DISTINCT LOCATION_ID)` rather than `COUNT(*)` when counting locations. A single location may have multiple rows due to different providers, technologies, or service types.
</Warning>

### Percent of Locations

**Metric Name**: `PERCENT_OF_LOCATIONS`

**Definition**: Percentage of total locations in the dataset

**Calculation**: `(Location count / Total locations) * 100`

---

## Calculated Fields & Logic

### Technology Code Mapping

**Field**: `TECHNOLOGY_NAME`  
**Source**: `TECHNOLOGY` (numeric code)

The dataset converts numeric technology codes into human-readable names:

| Numeric Code | Technology Name | Description |
|--------------|-----------------|-------------|
| 10 | Copper | DSL (Digital Subscriber Line) over phone lines |
| 40 | Cable | Cable modem via TV cable infrastructure |
| 50 | Fiber to the Premises | Direct fiber optic connection to building |
| 60 | GSO Satellite | Geostationary orbit satellite (traditional satellite) |
| 61 | NGSO Satellite | Non-geostationary orbit satellite (e.g., Starlink, OneWeb) |
| 70 | Unlicensed Fixed Wireless | Fixed wireless using unlicensed spectrum (e.g., Wi-Fi frequencies) |
| 71 | Licensed Fixed Wireless | Fixed wireless using licensed spectrum (e.g., cellular bands) |
| 72 | LBR Fixed Wireless | Low-Band Radio fixed wireless |
| 0 | Other | Other or unknown technologies |

**SQL Logic**:

```sql
CASE 
    WHEN TECHNOLOGY = 10 THEN 'Copper'
    WHEN TECHNOLOGY = 40 THEN 'Cable'
    WHEN TECHNOLOGY = 50 THEN 'Fiber to the Premises'
    WHEN TECHNOLOGY = 60 THEN 'GSO Satellite'
    WHEN TECHNOLOGY = 61 THEN 'NGSO Satellite'
    WHEN TECHNOLOGY = 70 THEN 'Unlicensed Fixed Wireless'
    WHEN TECHNOLOGY = 71 THEN 'Licensed Fixed Wireless'
    WHEN TECHNOLOGY = 72 THEN 'LBR Fixed Wireless'
    WHEN TECHNOLOGY = 0 THEN 'Other'
    ELSE 'Unknown'
END AS TECHNOLOGY_NAME
```

**Business Context**: These technology types represent fundamentally different approaches to delivering broadband with varying capacity, costs, and capabilities.

### DOCSIS Classification Logic

**Field**: `DOCSIS_CLASS`  
**Source**: `MAX_ADVERTISED_DOWNLOAD_SPEED` and `MAX_ADVERTISED_UPLOAD_SPEED`  
**Applies to**: Cable providers only (TECHNOLOGY = 40)

| DOCSIS Version | Download Speed | Upload Speed | Description |
|----------------|----------------|--------------|-------------|
| **4.0** | > 1000 Mbps | > 1000 Mbps | Symmetrical multi-gigabit (both down & up > 1 Gbps) |
| **3.1** | > 800 Mbps | Any | High-speed asymmetrical (down > 800 Mbps) |
| **2.0/3.0** | â‰¤ 800 Mbps | Any | Standard cable speeds |

**SQL Logic**:

```sql
CASE 
    WHEN MAX_ADVERTISED_DOWNLOAD_SPEED > 1000 
        AND MAX_ADVERTISED_UPLOAD_SPEED > 1000 
        THEN '4.0'
    WHEN MAX_ADVERTISED_DOWNLOAD_SPEED > 800 
        THEN '3.1'
    ELSE '2.0/3.0'
END AS DOCSIS_CLASS
```

**Business Context**: DOCSIS (Data Over Cable Service Interface Specification) defines how cable companies deliver internet. Newer versions support higher speeds, with DOCSIS 4.0 competing directly with fiber.

<Note>
`DOCSIS_CLASS` is NULL for all non-cable technologies (fiber, wireless, satellite, etc.). This is expected - DOCSIS only applies to cable.
</Note>

### BUILD_DATE Calculation

**Field**: `BUILD_DATE`  
**Source**: `TIME_PERIOD_DATE`  
**Purpose**: Identify when a provider first started offering a specific technology at each location

**SQL Logic**:

```sql
MIN(TO_DATE(TIME_PERIOD, 'MMMM YYYY')) OVER (
    PARTITION BY LOCATION_ID, BRAND_NAME, TECHNOLOGY
) AS BUILD_DATE
```

**How It Works**: For each unique combination of Location + Provider + Technology, finds the **earliest TIME_PERIOD_DATE** when that combination first appears.

**Example**:

| LOCATION_ID | BRAND_NAME | TECHNOLOGY | TIME_PERIOD | BUILD_DATE |
|-------------|------------|------------|-------------|------------|
| 12345 | Comcast | 40 (Cable) | June 2022 | **2022-06-01** |
| 12345 | Comcast | 40 (Cable) | December 2022 | **2022-06-01** |
| 12345 | Comcast | 50 (Fiber) | December 2023 | **2023-12-01** |
| 12345 | AT&T | 50 (Fiber) | June 2022 | **2022-06-01** |

**Use Cases**:
- Track service expansion and market entry timing
- Identify recent builds by filtering on BUILD_DATE
- Analyze build-out velocity over time

<Warning>
**BUILD_DATE represents when the service first appeared in FCC reporting data, not necessarily the actual construction date.**

- Data collection started in June 2022, so no BUILD_DATE can be earlier than 2022-06-01
- If a provider served a location before June 2022, BUILD_DATE will show 2022-06-01
- There can be a lag between actual construction and FCC reporting
</Warning>

### TIME_PERIOD_DATE Conversion

**Field**: `TIME_PERIOD_DATE`  
**Source**: `TIME_PERIOD` (text string)  
**Purpose**: Convert human-readable time periods into dates for time-series analysis

```sql
TO_DATE(TIME_PERIOD, 'MMMM YYYY') AS TIME_PERIOD_DATE
```

| TIME_PERIOD (Input) | TIME_PERIOD_DATE (Output) |
|---------------------|---------------------------|
| June 2022 | 2022-06-01 |
| December 2022 | 2022-12-01 |
| June 2023 | 2023-06-01 |
| December 2023 | 2023-12-01 |

**Result**: Always the **first day of the month**

### Primary Key Generation

**Field**: `PRIMARY_KEY`  
**Purpose**: Create a unique identifier for each row using composite business keys

```sql
MD5(
    COALESCE(CAST(LOCATION_ID AS VARCHAR), '') || '|' ||
    COALESCE(BRAND_NAME, '') || '|' ||
    COALESCE(TIME_PERIOD, '') || '|' ||
    COALESCE(FRN, '') || '|' ||
    COALESCE(CAST(TECHNOLOGY AS VARCHAR), '') || '|' ||
    COALESCE(BUSINESS_RESIDENTIAL_CODE, '') || '|' ||
    COALESCE(CAST(MAX_ADVERTISED_DOWNLOAD_SPEED AS VARCHAR), '') || '|' ||
    COALESCE(CAST(MAX_ADVERTISED_UPLOAD_SPEED AS VARCHAR), '')
) AS PRIMARY_KEY
```

Creates a fixed-length (32 character) unique identifier that's deterministic and handles NULL values safely.

<Info>
For most business analysis, you'll filter and group by the human-readable dimension fields (BRAND_NAME, TECHNOLOGY_NAME, etc.) rather than PRIMARY_KEY.
</Info>

---

## Field Reference

### Dimensions

<AccordionGroup>
  <Accordion title="PRIMARY_KEY" icon="key">
    **Type**: String (MD5 hash)
    
    **Description**: Unique identifier for each record, generated from composite key fields.
    
    **Composition**: MD5 hash of LOCATION_ID + BRAND_NAME + TIME_PERIOD + FRN + TECHNOLOGY + BUSINESS_RESIDENTIAL_CODE + speeds
    
    **Usage**: Ensure uniqueness in joins, identify duplicate records
  </Accordion>
  
  <Accordion title="BRAND_NAME" icon="tag">
    **Type**: String
    
    **Description**: Consumer-facing brand name of the broadband provider
    
    **Top 10 values** (by location count in Indiana):
    - Comcast
    - AT&T
    - Verizon
    - Frontier Communications
    - T-Mobile
    - Viasat
    - HughesNet
    - Starlink
    - Metronet
    - Smithville
    
    **Usage**: Primary field for provider analysis and market share calculations
    
    **Note**: One company may have multiple brand names (e.g., Comcast and Xfinity)
  </Accordion>
  
  <Accordion title="FRN" icon="id-badge">
    **Type**: String
    
    **Description**: FCC Registration Number - unique identifier assigned by the FCC to each provider entity
    
    **Format**: Numeric string (e.g., "0001234567")
    
    **Usage**: Join to FCC provider databases, distinguish between subsidiaries with similar brand names
    
    **Note**: Multiple brands may share the same FRN if owned by the same corporate entity
  </Accordion>
  
  <Accordion title="PROVIDER_ID" icon="building">
    **Type**: Number
    
    **Description**: Internal provider identifier used in FCC reporting
    
    **Usage**: Alternative provider identifier for grouping and filtering
    
    **Relationship**: Each FRN typically maps to one PROVIDER_ID
  </Accordion>
  
  <Accordion title="LOCATION_ID" icon="location-dot">
    **Type**: Number
    
    **Description**: Unique identifier for each broadband service location (typically a building or serviceable address)
    
    **Usage**: Core field for counting distinct locations and calculating market share
    
    **Critical**: Always use `COUNT(DISTINCT LOCATION_ID)` to count locations, as one location can appear in multiple rows
    
    **Associated Metric**: NUMBER_OF_LOCATIONS = COUNT_DISTINCT(LOCATION_ID)
  </Accordion>
  
  <Accordion title="TECHNOLOGY" icon="tower-broadcast">
    **Type**: Number
    
    **Description**: Numeric code representing the broadband technology type
    
    **Values**:
    - 10 = Copper (DSL)
    - 40 = Cable (DOCSIS)
    - 50 = Fiber to the Premises
    - 60 = GSO Satellite
    - 61 = NGSO Satellite
    - 70 = Unlicensed Fixed Wireless
    - 71 = Licensed Fixed Wireless
    - 72 = LBR Fixed Wireless
    - 0 = Other
    
    **Usage**: Use TECHNOLOGY_NAME instead for business analysis (more readable)
  </Accordion>
  
  <Accordion title="TECHNOLOGY_NAME" icon="signal">
    **Type**: String
    
    **Description**: Human-readable name for the broadband technology type
    
    **Distribution** (Indiana sample):
    - Cable: ~45% of location-provider combinations
    - Fiber to the Premises: ~25%
    - Licensed Fixed Wireless: ~15%
    - NGSO Satellite: ~8%
    - Copper: ~4%
    - GSO Satellite: ~2%
    - Unlicensed Fixed Wireless: ~1%
    
    **Usage**: Primary field for technology analysis
    
    **Preferred**: Use this instead of the numeric TECHNOLOGY code
  </Accordion>
  
  <Accordion title="MAX_ADVERTISED_DOWNLOAD_SPEED" icon="download">
    **Type**: Number
    
    **Description**: Maximum advertised download speed in Mbps (megabits per second)
    
    **Percentiles** (Indiana sample):
    - 10th percentile: 25 Mbps
    - 25th percentile: 100 Mbps
    - Median: 300 Mbps
    - 75th percentile: 1000 Mbps
    - 90th percentile: 1200 Mbps
    
    **Usage**: Speed tier analysis, service comparison, gigabit availability tracking
    
    **Note**: These are advertised speeds, not actual measured speeds
  </Accordion>
  
  <Accordion title="MAX_ADVERTISED_UPLOAD_SPEED" icon="upload">
    **Type**: Number
    
    **Description**: Maximum advertised upload speed in Mbps (megabits per second)
    
    **Percentiles** (Indiana sample):
    - 10th percentile: 3 Mbps
    - 25th percentile: 10 Mbps
    - Median: 35 Mbps
    - 75th percentile: 300 Mbps
    - 90th percentile: 1000 Mbps
    
    **Usage**: Symmetrical service analysis (compare to download speed), business service evaluation
    
    **Note**: Upload speeds are typically lower than download except for fiber
  </Accordion>
  
  <Accordion title="LOW_LATENCY" icon="stopwatch">
    **Type**: Number (0 or 1)
    
    **Description**: Indicator of whether the service meets FCC low latency thresholds
    
    **Values**:
    - 1 = Low latency service (typically < 100ms)
    - 0 = Higher latency service
    
    **Distribution**: Most terrestrial services (cable, fiber, fixed wireless) = 1; most satellite = 0
    
    **Usage**: Filter latency-sensitive applications, exclude high-latency satellite for certain analyses
  </Accordion>
  
  <Accordion title="BUSINESS_RESIDENTIAL_CODE" icon="building">
    **Type**: String (single character)
    
    **Description**: Indicates whether service is available to business, residential, or both customer types
    
    **Values**:
    - **B** = Business customers only
    - **R** = Residential customers only
    - **X** = Both business and residential customers
    
    **Distribution** (Indiana sample):
    - R (Residential only): ~60%
    - X (Both): ~35%
    - B (Business only): ~5%
    
    **Usage**: Filter to residential or business services, identify providers serving business customers
  </Accordion>
  
  <Accordion title="BLOCK_GEOID" icon="map">
    **Type**: String
    
    **Description**: Census block GEOID (geographic identifier) - the finest level of census geography
    
    **Format**: 15-digit code (State + County + Tract + Block)
    
    **Usage**: Geographic analysis at the census block level, mapping service availability
    
    **Note**: Census blocks are smaller than ZIP codes and provide more precise geographic analysis
  </Accordion>
  
  <Accordion title="TIME_PERIOD" icon="calendar">
    **Type**: String
    
    **Description**: Time period of the data snapshot in human-readable format
    
    **Available Periods**:
    - June 2022
    - December 2022
    - June 2023
    - December 2023
    - June 2024
    - December 2024
    
    **Usage**: Filter to specific time periods, display labels in visualizations
    
    **Note**: Data is collected semi-annually. Use TIME_PERIOD_DATE for time-series calculations.
  </Accordion>
  
  <Accordion title="TIME_PERIOD_DATE" icon="calendar-days">
    **Type**: Date
    
    **Description**: Time period as a date value (first day of the reporting month)
    
    **Format**: YYYY-MM-DD (e.g., 2024-12-01)
    
    **Usage**: Time-series analysis, date-based filtering, period-over-period calculations
    
    **Calculation**: Derived from TIME_PERIOD using TO_DATE(TIME_PERIOD, 'MMMM YYYY')
  </Accordion>
  
  <Accordion title="BUILD_DATE" icon="calendar-check">
    **Type**: Date
    
    **Description**: First date this location became available for this specific brand + technology combination in the dataset
    
    **Format**: YYYY-MM-DD
    
    **Calculation**: MIN(TIME_PERIOD_DATE) windowed by LOCATION_ID, BRAND_NAME, TECHNOLOGY
    
    **Usage**: Build-out timeline analysis, track when providers entered markets, identify recent expansions
    
    **Business Context**: Represents when service first appeared in FCC data, which may not be the exact construction date
  </Accordion>
  
  <Accordion title="DOCSIS_CLASS" icon="signal-stream">
    **Type**: String
    
    **Description**: DOCSIS (Data Over Cable Service Interface Specification) version classification for cable technology based on advertised speeds
    
    **Values**:
    - **4.0**: Download > 1000 Mbps AND Upload > 1000 Mbps (symmetrical multi-gigabit)
    - **3.1**: Download > 800 Mbps
    - **2.0/3.0**: All others
    
    **Distribution** (Cable providers only in Indiana):
    - 2.0/3.0: ~40%
    - 3.1: ~55%
    - 4.0: ~5%
    
    **Usage**: Track cable technology upgrades, identify markets with modern cable infrastructure
    
    **Note**: Only applicable to Cable (TECHNOLOGY = 40). NULL for all other technologies.
  </Accordion>
  
  <Accordion title="STATE" icon="map-location">
    **Type**: String
    
    **Description**: State name where the service is available
    
    **Current Value**: INDIANA (100% in current Gold layer sample)
    
    **Usage**: Geographic filtering, state-level aggregation
    
    **Note**: Full CLEAN layer includes all 50 states
  </Accordion>
  
  <Accordion title="COUNTY" icon="map-pin">
    **Type**: String
    
    **Description**: County name where the service is available
    
    **Top 10 Counties** (Indiana, by location count):
    - Marion
    - Lake
    - Allen
    - Hamilton
    - St. Joseph
    - Elkhart
    - Tippecanoe
    - Vanderburgh
    - Porter
    - Johnson
    
    **Usage**: County-level analysis, urban vs. rural comparisons
  </Accordion>
  
  <Accordion title="ZCTA" icon="location-crosshairs">
    **Type**: String
    
    **Description**: ZIP Code Tabulation Area - census approximation of USPS ZIP codes
    
    **Format**: 5-digit string (e.g., "46201")
    
    **Usage**: ZIP code-level analysis, market territory definition
    
    **Note**: ZCTAs are census geography and may not exactly match postal ZIP codes
  </Accordion>
  
  <Accordion title="BRAND_TECH" icon="layer-group">
    **Type**: String
    
    **Description**: Combined string of brand names with their technology codes at this location
    
    **Format**: Pipe-separated list (e.g., "Comcast (40)|AT&T (50)")
    
    **Usage**: Advanced analysis of technology combinations at a single location
    
    **Note**: This is a composite field. For most analysis, filter BRAND_NAME and TECHNOLOGY separately.
  </Accordion>
  
  <Accordion title="BRAND_NAMES" icon="tags">
    **Type**: String
    
    **Description**: Pipe-separated list of all brand names available at this location
    
    **Format**: "Brand1|Brand2|Brand3"
    
    **Usage**: Identify locations with multiple providers, competition analysis
    
    **Example**: "Comcast|AT&T|T-Mobile"
  </Accordion>
  
  <Accordion title="TECHNOLOGIES" icon="list">
    **Type**: String
    
    **Description**: Pipe-separated list of all technology codes available at this location
    
    **Format**: "40|50|71" (numeric codes)
    
    **Usage**: Technology diversity analysis
    
    **Preferred**: Use TECHNOLOGIES_DESCRIPTOR for human-readable names
  </Accordion>
  
  <Accordion title="TECHNOLOGY_DESCRIPTOR" icon="file-lines">
    **Type**: String
    
    **Description**: Human-readable description of the technology type (same as TECHNOLOGY_NAME)
    
    **Usage**: Equivalent to TECHNOLOGY_NAME, use either one
  </Accordion>
  
  <Accordion title="TECHNOLOGIES_DESCRIPTOR" icon="list-check">
    **Type**: String
    
    **Description**: Pipe-separated list of all human-readable technology types available at this location
    
    **Format**: "Cable|Fiber to the Premises|Licensed Fixed Wireless"
    
    **Usage**: Display all technologies available at a location
  </Accordion>
  
  <Accordion title="BRAND_TECH_DESCRIPTOR" icon="tags">
    **Type**: String
    
    **Description**: Combined string of brand names with their human-readable technology types at this location
    
    **Format**: "Comcast (Cable)|AT&T (Fiber to the Premises)"
    
    **Usage**: Display full provider-technology combinations for a location
  </Accordion>
</AccordionGroup>

---

## Analysis in Lightdash

Use this table when you need:
- Detailed attributes like speeds, DOCSIS class, or business/residential codes
- Build date tracking for expansion analysis
- Census block-level geographic detail

Group by provider and technology dimensions, and use the pre-configured `NUMBER_OF_LOCATIONS` metric.

---

## Next Steps

<Card title="usa_location_summary" icon="table" href="/fiber-map/usa-location-summary">
  View the simplified aggregated table for faster location counting
</Card>

